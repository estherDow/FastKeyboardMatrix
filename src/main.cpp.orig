#include <Arduino.h>
#include <MIDI.h>

int RXLED = 17; // The RX LED has a defined Arduino pin
// Note: The TX LED was not so lucky, we'll need to use pre-defined
// macros (TXLED1, TXLED0) to control that.
// (We could use the same macros for the RX LED too -- RXLED1,
//  and RXLED0.)
MIDI_CREATE_DEFAULT_INSTANCE();

void setup()
{
    pinMode(RXLED, OUTPUT);

    Serial.begin(9600);
    Serial.println("Initialize Serial Monitor");

    Serial1.println("Initialize Serial Hardware UART Pins");
    MIDI.begin(4); // Launch MIDI and listen to channel 4
}

void loop()
{
    Serial.println("Hello world!");                 // Print "Hello World" to the Serial Monitor

    digitalWrite(RXLED, LOW);    // set the RX LED ON
    TXLED0;                      // TX LED is not tied to a normally controlled pin so a macro is needed, turn LED OFF
    delay(1000);                 // wait for a second
    MIDI.sendNoteOn(42, 127, 1); // Send a Note (pitch 42, velo 127 on channel 1)
    delay(1000);                 // Wait for a second
    MIDI.sendNoteOff(42, 0, 1);
    digitalWrite(RXLED, HIGH); // set the RX LED OFF
    TXLED1;                    // TX LED macro to turn LED ON
    delay(1000);               // wait for a second
}

